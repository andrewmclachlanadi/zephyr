# Analog Devices EV-SC598-SOM with SDRAM, CANFD and eMSI initialization
#
# Copyright (c) 2021-2023 Analog Devices, Inc. All Rights Reserved.
# This software is proprietary to Analog Devices, Inc. and its licensors.

set CHIPNAME adspsc598

# Set flash parameters for IS25LP512M chip
set FLASH_BASE 0x0

source [find target/adspsc59x_a55.cfg]
source [find board/adspsc5xx_ezbrd.tcl]

proc adspsc59x_a55_init {} {

   adspsc59x_init_ddr3  0

   adspsc59x_init_emac

   set canfd0_base 0x31046000
   set canfd1_base 0x31047000

   # Initialize CANFD
   canfd_config $canfd0_base
   canfd_config $canfd1_base

   # Initialize eMSI so that the registers can be read by the debugger
   adspsc59x_a55_init_emsi
}
